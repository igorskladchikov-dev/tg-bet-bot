# Пошаговая инструкция: бот в чате с друзьями 24/7

Цель: твой бот «Ставки с друзьями» работает в общем чате и не выключается, даже когда твой компьютер выключен.

---

## Часть 1. Создать бота в Telegram

1. Открой Telegram (на телефоне или на компьютере).
2. В поиске введи: **@BotFather** и открой этого бота.
3. Нажми **«Запустить»** (Start).
4. Отправь команду:  
   **`/newbot`**
5. BotFather спросит имя бота. Напиши, например: **Ставки с друзьями** и нажми Enter.
6. Потом попросит **username** (логин бота). Он должен заканчиваться на `bot`, например: **my_friends_bet_bot** (если занято, попробуй другой вариант).
7. В ответ BotFather пришлёт **токен** — длинную строку вида:  
   `7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`  
   **Скопируй этот токен и сохрани** (например, в блокнот). Он понадобится позже. Бота в чат пока не добавляй.

---

## Часть 2. Аккаунт на GitHub и загрузка проекта

Нужно выложить код бота на GitHub, чтобы сервис мог его скачать и запускать.

### 2.1 Установить Git (если ещё нет)

1. Зайди на сайт: https://git-scm.com/download/win  
2. Скачай установщик и установи Git (можно везде нажимать «Далее»).
3. Перезапусти компьютер или Cursor после установки.

### 2.2 Зарегистрироваться на GitHub

1. Зайди на https://github.com  
2. Нажми **Sign up** и создай бесплатный аккаунт (логин, почта, пароль).

### 2.3 Создать новый репозиторий на GitHub

1. Войди в аккаунт на GitHub.
2. Справа вверху нажми **«+»** → **«New repository»**.
3. **Repository name:** например `tg-bet-bot`.
4. Выбери **Private** (приватный), если не хочешь, чтобы репозиторий был виден всем.
5. **НЕ ставь** галочки «Add a README» и т.п. — оставь пустой репозиторий.
6. Нажми **«Create repository»**.

### 2.4 Загрузить проект из папки в Cursor в этот репозиторий

1. Открой в Cursor папку проекта (та, где лежат `bot.py`, `storage.py`, `requirements.txt`).
2. Открой терминал в Cursor: меню **Terminal** → **New Terminal** (или нажми **Ctrl+`** — это обратная кавычка, обычно над Tab).
3. Выполни команды по очереди (подставь свой логин GitHub и имя репозитория вместо `ТВОЙ_ЛОГИН` и `tg-bet-bot`, если называл по-другому):

#### Что делает каждая команда:

**Команда 1:** `git init`  
Создаёт в текущей папке скрытую папку `.git` — это «репозиторий Git». После этой команды Git начинает отслеживать файлы в этой папке.

**Команда 2:** `git add .`  
**Да, точка нужна!** Точка означает «все файлы в текущей папке и подпапках». Эта команда добавляет все файлы проекта в «очередь на загрузку» (staging area).  
Альтернатива: если хочешь добавить файлы по одному, можно написать `git add bot.py`, потом `git add storage.py` и т.д., но проще использовать точку.

**Команда 3:** `git commit -m "First commit: bet bot"`  
Сохраняет «снимок» всех файлов, которые ты добавил командой `git add`. `-m "..."` — это сообщение, которое описывает, что ты сохраняешь. Можно написать любое сообщение, например `"Initial commit"` или `"Мой бот для ставок"`.

**Команда 4:** `git branch -M main`  
Переименовывает ветку в `main` (это стандартное название главной ветки на GitHub). Если Git скажет, что ветка уже называется `main`, это нормально — команда ничего не сломает.

**Команда 5:** `git remote add origin https://github.com/ТВОЙ_ЛОГИН/tg-bet-bot.git`  
Говорит Git: «этот репозиторий на GitHub — это место, куда я буду загружать код». Замени `ТВОЙ_ЛОГИН` на свой логин GitHub и `tg-bet-bot` на имя репозитория, если называл по-другому.  
**Важно:** URL репозитория можно скопировать на странице репозитория на GitHub — там есть зелёная кнопка **«Code»**, нажми на неё и скопируй HTTPS-ссылку.

**Команда 6:** `git push -u origin main`  
Загружает все твои файлы на GitHub в репозиторий. `-u` означает «запомнить, что это основная ветка для загрузки».

#### Выполнение команд:

Выполняй команды по одной, нажимая Enter после каждой. После каждой команды Git может вывести сообщение — это нормально. Пример:

```bash
git init
# Выведет: Initialized empty Git repository in C:/Users/.../tg bot/.git/

git add .
# Может ничего не вывести или показать список файлов — это нормально

git commit -m "First commit: bet bot"
# Выведет что-то вроде: [main (root-commit) abc1234] First commit: bet bot

git branch -M main
# Может ничего не вывести или сказать, что ветка уже main

git remote add origin https://github.com/ТВОЙ_ЛОГИН/tg-bet-bot.git
# Обычно ничего не выводит, если всё правильно

git push -u origin main
# Здесь GitHub попросит войти (см. пункт 4 ниже)
```

#### Если видишь ошибки:

- **"fatal: not a git repository"** при `git add` → сначала выполни `git init`.
- **"fatal: remote origin already exists"** при `git remote add` → значит, ты уже добавлял этот репозиторий. Можно пропустить эту команду или выполнить `git remote set-url origin https://github.com/ТВОЙ_ЛОГИН/tg-bet-bot.git`.
- **"error: failed to push"** при `git push` → проверь, что URL правильный и что ты залогинен в GitHub (см. пункт 4).

4. При команде `git push` GitHub попросит войти:
   - **Логин:** твой username на GitHub.
   - **Пароль:** НЕ обычный пароль аккаунта, а **Personal Access Token** (PAT).  
     Как создать токен:
     - Зайди на GitHub → нажми на свой аватар (справа вверху) → **Settings**.
     - В левом меню внизу: **Developer settings** → **Personal access tokens** → **Tokens (classic)**.
     - Нажми **Generate new token** → **Generate new token (classic)**.
     - **Note:** например, "Railway deploy".
     - Выбери срок действия (например, 90 дней или "No expiration").
     - В разделе **Select scopes** поставь галочку **`repo`** (это даст доступ к репозиториям).
     - Нажми **Generate token** внизу.
     - **Скопируй токен сразу** (он показывается один раз) — это и будет твой «пароль» при `git push`.
   - Вставь логин и токен в терминал, когда Git попросит.

5. После успешного `git push` зайди на страницу репозитория на GitHub — там должны появиться все файлы проекта (`bot.py`, `storage.py`, `requirements.txt`, `README.md` и т.д.).  
   **Важно:** файл `.env` там НЕ будет — это правильно, он в `.gitignore`, чтобы токен бота не попал в публичный репозиторий. Токен мы добавим позже на Railway.

---

## Часть 3. Запустить бота на Railway (чтобы работал всегда)

Railway — сервис, который будет круглосуточно запускать твоего бота в интернете. Есть бесплатный кредит в месяц (обычно хватает на одного бота).

### 3.1 Регистрация в Railway

1. Зайди на https://railway.app  
2. Нажми **«Login»** и войди через **GitHub** (так проще — доступ к репозиторию подтянется сам).

### 3.2 Создать проект и подключить репозиторий

1. На главной нажми **«New Project»**.
2. Выбери **«Deploy from GitHub repo»**.
3. Если репозиторий не виден — нажми **«Configure GitHub App»** и выдай Railway доступ к нужным репозиториям (можно только `tg-bet-bot`).
4. Выбери репозиторий с ботом (например `tg-bet-bot`) и нажми на него.

### 3.3 Добавить токен бота

1. В проекте Railway откроется сервис (одна «карточка»). Нажми на неё.
2. Перейди во вкладку **«Variables»** (Переменные).
3. Нажми **«+ New Variable»** или **«Add Variable»**.
4. Имя: **`BOT_TOKEN`**  
   Значение: вставь тот токен, который дал BotFather (без кавычек и пробелов).
5. Сохрани. Railway сам перезапустит деплой.

### 3.4 Указать, как запускать бота

1. В том же сервисе открой вкладку **«Settings»**.
2. Найди блок **«Build»** или **«Deploy»**.
3. В поле **Start Command** (команда запуска) укажи:  
   **`python bot.py`**  
   Если такого поля нет — Railway может подхватить команду из файла `Procfile` в проекте (он уже добавлен в репозиторий).
4. Сохрани настройки. Дождись, пока статус станет **«Success»** / зелёный (обычно 1–2 минуты).

Готово: бот уже запущен на сервере и работает постоянно.

---

## Часть 4. Добавить бота в чат с друзьями

1. Открой в Telegram тот чат, где ты с друзьями.
2. Нажми на название чата вверху → **«Добавить участников»** (или иконка с человечком и плюсом).
3. В поиске введи **username твоего бота** (тот, что ты задал в BotFather, например `@my_friends_bet_bot`).
4. Выбери бота и добавь в чат.
5. В чате кто-ни may написать **`/start`** — бот ответит приветствием и списком команд. Дальше все могут делать ставки, смотреть баланс и т.д. по командам из меню или из `/help`.

---

## Краткая шпаргалка

| Шаг | Что сделать |
|-----|-------------|
| 1 | @BotFather → `/newbot` → сохранить токен |
| 2 | GitHub: аккаунт, новый репозиторий, загрузить проект через `git init` и `git push` |
| 3 | Railway: New Project → Deploy from GitHub → выбрать репозиторий → Variables → добавить `BOT_TOKEN` → сохранить, дождаться Success |
| 4 | В чате с друзьями: «Добавить участников» → ввести @username_бота → написать `/start` |

После этого бот будет работать в чате 24/7, даже когда твой ПК выключен. Данные (балансы, ставки) хранятся на сервере Railway в папке `data/` внутри контейнера; при пересоздании сервиса они могут сброситься, поэтому для долгого использования можно позже настроить постоянное хранилище (это отдельный шаг).

Если на каком-то шаге появится ошибка — скопируй её сюда, и можно будет разобрать по шагам.
