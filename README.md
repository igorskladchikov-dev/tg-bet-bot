# Telegram Bot — Ставки с друзьями

Каждый участник получает **10 000 ₽** на счёт. Можно делать ставки, указывать коэффициент и сумму; все ставки и балансы хранятся в боте.

## Как получить токен бота

1. Открой Telegram и найди **@BotFather**.
2. Отправь команду `/newbot`.
3. Введи имя бота (например: `Ставки с друзьями`) и username (например: `my_friends_bet_bot`).
4. BotFather пришлёт **токен** вида `123456789:ABCdefGHI...`. Скопируй его.

## Установка и запуск

1. Установи Python 3.10+ (если ещё не установлен).

2. Создай виртуальное окружение (по желанию):
   ```bash
   python -m venv .venv
   .venv\Scripts\activate
   ```

3. Установи зависимости:
   ```bash
   pip install -r requirements.txt
   ```

4. Создай файл `.env` в папке проекта и укажи токен:
   ```
   BOT_TOKEN=123456789:ABCdefGHI...
   ```
   (Можно скопировать `config.example.env` в `.env` и вписать токен.)

5. Запусти бота:
   ```bash
   python bot.py
   ```

После этого открой бота в Telegram и отправь `/start`.

## Команды бота

| Команда | Описание |
|--------|----------|
| `/start` | Регистрация и стартовый баланс 10 000 ₽ |
| `/help` | Полное руководство по боту (все команды и как пользоваться) |
| `/balance` | Текущий баланс |
| `/bet описание \| коэффициент \| сумма` | Сделать ставку |
| `/bets` | Список своих ставок; у активных — кнопки «Сыграло» / «Не сыграло» для закрытия |
| `/active` | Все нерассчитанные ставки в чате (автор, описание, коэффициент, сумма) |
| `/top` | Таблица участников по балансу |
| `/results` | Подвести итоги (показать результаты), затем сбросить балансы — у всех снова по 10 000 ₽ |

## Пример ставки

```
/bet Победа Спартака в матче | 2.0 | 500
```

- **описание** — на что ставите;
- **коэффициент** — например 2.0 (при выигрыше получите 500 × 2 = 1000 ₽);
- **сумма** — сколько рублей ставите (списывается с баланса).

После результата события нажмите в списке `/bets` кнопку «✅ Сыграло» или «❌ Не сыграло».

Данные хранятся в папке `data/`: `users.json`, `bets.json`. Закрытия ставок логируются в `data/settlements.log` (кто и как закрыл).
